\documentclass{article}
\usepackage{geometry}
\usepackage{paralist}
\usepackage[T1]{fontenc}
\usepackage{reledmac}
\usepackage{changepage}

\usepackage{pgfplots}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes.geometric, arrows}
\tikzstyle{arrow} = [thick,->,>=stealth]

\usepackage{fancyhdr}
\fancyhead[L]{
	\begin{tabular}{l}
		\LARGE \textbf{\textsc{Distributed Algorithms}} \\
		\Large Exercise 02
	\end{tabular}
}
\fancyhead[R]{
	\begin{tabular}{r}
		16-124-836 \\
		Marcel \textsc{Zauder}
	\end{tabular}
}
\renewcommand{\headrulewidth}{0.4pt}
\fancyfoot[C]{\thepage}
\renewcommand{\footrulewidth}{0.4pt}

\usepackage{hyperref}

\begin{document}
	\pagestyle{fancy}
	
	\section*{2.1 Pizza or Pasta}
	\begin{adjustwidth}{-3em}{}
		\begin{tabular}{lllll}
			\begin{tabular}{|l|}
				\hline
				\textbf{Module \textsc{Alice}:} \\
				\hline
				\underline{Init:} \\
				\ \ $\textit{custPizzaBuffer} \ = \ \emptyset$ \\
				\ \ $\textit{custPastaBuffer} \ = \ \emptyset$ \\
				\ \ $\textit{pizzaBuffer} \ = \ \emptyset$ \\
				\ \ $\textit{pastaBuffer} \ = \ \emptyset$ \\
				\\
				\underline{upon} $\langle \textit{Bob, getJob} \mid \textsc{Null} \rangle$ \\
				\ \ \underline{while} ($pizzaBuffer == \emptyset$) \{\} \\
				\ \ $\textit{dish} \leftarrow \textit{pizzaBuffer}$ \\
				\ \ trigger $\langle \textit{Bob, prepareDish} \mid dish \rangle$ \\
				\\
				\underline{upon} $\langle \textit{Carole, getJob} \mid \textsc{Null} \rangle$ \\
				\ \ \underline{while} ($pastaBuffer == \emptyset$) \{\} \\
				\ \ $\textit{dish} \leftarrow \textit{pastaBuffer}$ \\
				\ \ trigger $\langle \textit{Carole, prepareDish} \mid dish \rangle$ \\
				\\
				\underline{upon} $\langle \textit{Customer, orderDish} \mid \textit{customer, menu} \rangle$ \underline{do} \\
				\ \ \underline{if} (\textit{menu}.sortOf(Pizza)) \\
				\ \ \ \ $\textit{custPizzaBuffer} \ = \ \textit{custPizzaBuffer} \cup \textit{customer}$ \\
				\ \ \ \ $\textit{pizzaBuffer} \ = \ \textit{pizzaBuffer} \cup \textit{menu}$ \\
				\ \ \underline{else} \\
				\ \ \ \ $\textit{custPastaBuffer} \ = \ \textit{custPastaBuffer} \cup \textit{customer}$ \\
				\ \ \ \ $\textit{pastaBuffer} \ = \ \textit{pastaBuffer} \cup \textit{menu}$ \\
				\\
				\underline{upon} $\langle \textit{Bob, returnDish} \mid \textit{menu} \rangle$ \underline{do} \\
				\ \ $\textit{customer} \leftarrow \textit{custPizzaBuffer}$ \\
				\ \ $\textit{custPizzaBuffer} \ = \ \textit{custPizzaBuffer} \setminus \textit{customer}$ \\
				\ \ trigger $\langle \textit{Alice, serveDish} \mid \textit{customer, menu} \rangle$ \\
				\\
				\underline{upon} $\langle \textit{Carole, returnDish} \mid \textit{menu} \rangle$ \underline{do} \\
				\ \ $\textit{customer} \leftarrow \textit{custPastaBuffer}$ \\
				\ \ $\textit{custPastaBuffer} \ = \ \textit{custPastaBuffer} \setminus \textit{customer}$ \\
				\ \ trigger $\langle \textit{Alice, serveDish} \mid \textit{customer, menu} \rangle$ \\
				\hline
			\end{tabular}
			&
			&
			\begin{tabular}{l}
				\begin{tabular}{|l|}
					\hline
					\textbf{Module \textsc{Bob}:} \\
					\hline
					\underline{Init:} \\
					\ \ $\textit{bobPizzaBuffer} \ = \ \emptyset$ \\
					\ \ $\textit{triggerCounter} \ = \ 0$ \\
					\\
					\underline{while} (\textsc{True}) \\
					\ \ \underline{if} $\mid \textit{bobPizzaBuffer} \mid + \textit{triggerCounter} < 3$ \\
					\ \ \ \ trigger $\langle \textit{Bob, getJob} \mid \textsc{Null} \rangle$ \\
					\ \ \ \ $\textit{triggerCounter}++$ \\
					\ \ \underline{if} ($\mid \textit{bobPizzaBuffer} \mid \neq 0$) \\
					\ \ \ \ $\textit{dish} \leftarrow \textit{bobPizzaBuffer}$ \\
					\ \ \ \ \textit{prepare the dish} \\
					\ \ \ \ $\textit{bobPizzaBuffer} \ = \ \textit{bobPizzaBuffer} \setminus \textit{dish}$ \\
					\ \ \ \ trigger $\langle \textit{Bob, returnDish} \mid dish \rangle$ \\
					\\
					\underline{upon} $\langle \textit{Bob, prepareDish} \mid \textit{dish} \rangle$ \\
					\ \ $\textit{bobPizzaBuffer} \ = \ \textit{bobPizzaBuffer} \cup \textit{dish}$ \\
					\ \ $\textit{triggerCounter} \ -= 1$ \\
					\hline
				\end{tabular}
				\\
				\\
				\begin{tabular}{|l|}
					\hline
					\textbf{Module \textsc{Carole}:} \\
					\hline
					\underline{Init:} \\
					\ \ $\textit{carolePastaBuffer} \ = \ \emptyset$ \\
					\ \ $\textit{triggerCounter} \ = \ 0$ \\
					\\
					\underline{while} (\textsc{True}) \\
					\ \ \underline{if} $\mid \textit{carolePastaBuffer} \mid + \textit{triggerCounter} < 7$ \\
					\ \ \ \ trigger $\langle \textit{Carole, getJob} \mid \textsc{Null} \rangle$ \\
					\ \ \ \ $\textit{triggerCounter}++$ \\
					\ \ \underline{if} ($\mid \textit{carolePastaBuffer} \mid \neq 0$) \\
					\ \ \ \ $\textit{dish} \leftarrow \textit{carolePastaBuffer}$ \\
					\ \ \ \ \textit{prepare the dish} \\
					\ \ \ \ $\textit{carolePastaBuffer} \ = \ \textit{carolePastaBuffer} \setminus \textit{dish}$ \\
					\ \ \ \ trigger $\langle \textit{Carole, returnDish} \mid dish \rangle$ \\
					\\
					\underline{upon} $\langle \textit{Carole, prepareDish} \mid \textit{dish} \rangle$ \\
					\ \ $\textit{carolePastaBuffer} \ = \ \textit{carolePastaBuffer} \cup \textit{dish}$ \\
					\ \ $\textit{triggerCounter} \ -= 1$ \\
					\hline
				\end{tabular}
			\end{tabular}
		\end{tabular}			
	\end{adjustwidth}
	\newpage
	\section*{2.2 Safety and liveness}
	\begin{adjustwidth}{2em}{2em}	
		\begin{enumerate}[(a)]
			\item \textit{If some general attacks at time $t$, then the other general attacks at the same time.} \\
			This is a \textit{\textbf{safety property}}, because 
			\item \textit{If $m_2$ arrives after time $t$, then General A attack after General B.} \\
			This is a \textit{\textbf{safety property}}, because this statement ensures that General A will attack if and only if it receives the message delivered by $m_2$ and not just out of thin air.
			\item \textit{Eventually, General B will attack.} \\
			This is a \textit{\textbf{liveness property}}, because
			\item \textit{If messenegers $m_1$ and $m_2$ are not intercepted, then eventually both generals attack.} \\
			This is a \textit{\textbf{liveness property}}, because
			\item \textit{If $m_1$ and $m_2$ are not intercepted, then eventually both generals attack at time $t$.} \\
			This is a \textit{\textbf{mixture}}, because we have the safety property that both messenger will arrive in time - so before time $t$ - and the liveness property that eventually both attack at the same time $t$.
		\end{enumerate}			
	\end{adjustwidth}
	
	\section*{2.3 Unreliable clocks}
	\begin{adjustwidth}{2em}{2em}
		\begin{enumerate}[(a)]
			\item \textit{Find two examples, where timing issues lead to safety violations.} \\
			\item \textit{Find two examples, where timing issues lead to liveness volations.} \\
			As a first example, we can take the case from exercise 2.2. In there it could happen that $m_2$ is delivering the message after the time $t$. Therefore General A will attack after General B which violates the liveness property.
		\end{enumerate}			
	\end{adjustwidth}
\end{document}